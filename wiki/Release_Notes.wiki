#summary Tungsten Replicator Release Notes
#labels Featured

= Tungsten Replicator Release Notes =

== Introduction ==

This page contains release notes for Tungsten Replicator open source releases. 

== Tungsten Replicator 2.0.4 ==

This release contains greatly improved parallel replication capabilities including high-performance on-disk queues, a production quality single-command install, and new features to support multi-master replication using the system-of-record model.  In addition, there are numerous bug fixes.  

This release requires careful attention to upgrade due to the following changes: 

1.) Installation procedures have changed substantially.  The old tungsten.cfg is not compatible with the new tungsten.cfg file format, which is JSON-based.  

2.) The trep_commit_seqno table includes additional columns.  

Logs and other data structures should be backwards compatible.  However, due to the nature of these changes we recommend for the safest upgrade that you stop traffic on the master server, quiesce replication fully, delete existing THL logs as well as tungsten_<svcname> databases, then restart with new version 2.0.4 installations.  

The change in installations is a one-time occurrence that is necessary to provide better installation procedures that are fully scriptable.  

Issue 28 - Upgrade THL to use buffered I/O 

Issue 36 - Single command setup for replication   

Issue 42 - tungsten-replicator duplicates tarball expanded directory

Issue 71 - Enhance THL durability against failures

Issue 82 - Implement THL ParallelQueue Support, aka on-disk queues

Issue 83 - trepctl should take the RMI port from configuration files

Issue 97 - mysqldump options are not optimal

Issue 98 - properties file uses hardcoded file names for backup and other        

Issue 99 - tungsten installer does not detect running MySQL native replication   

Issue 103 - Replicator parsing for MySQL has a number of missing cases that result in large numbers of #UNKNOWN shards

Issue 106 - MySQL extractor fails to extract server_id value from first transaction in new binlog file

Issue 109 - Slave replicator loses track of position after a process restart     

Issue 113 - tungsten installer detects privileges for the wrong user

Issue 117 - Report null values distinctly in `./thl list` output          

Issue 122 - PrimaryKeyFilter throws NullPointerException if it can't find the table  

Issue 124 - UPDATE multiple rows with different values in a single SQL leads to inconsistency   

Issue 125 - tungsten-installer fails on Ubuntu 9.10      

Issue 126 - Merge Greenplum support            

Issue 130 - tools/tungsten-installer does not issue warnings when the master-host is incorrect   

Issue 133 - Make replicator use relay logs as their default      

Issue 138 - tungsten-installer should be able to accept properties values        

Issue 140 - tungsten-installer issues confusing error about server ID if MySL login credentials are wrong        

Issue 141 - tools/configure-service does not update services             

Issue 142 - Tungsten-installer :: Ruby issues :: NilClass (NoMethodError)        

Issue 146 - tungsten-installer hangs when there is a non-breaking space in the command arguments         

Issue 151 - Enable seamless migration from and to MySQL replication   Sponsored            

Issue 159 - Flush operation does not return the right sequence number (returns the last but one)         

Issue 160 - DatabaseTransformFilter fails with NullPointerException if an event does not have a default schema           

Issue 167 - broken installation in build 192   

Issue 169 - trepctl offline is ignored in some states, such as during replicator synchronization with master   

Issue 170 - Shard status list does not show latency correctly            

Issue 173 - `./trepctl online-skip z` doesn't wait for events to be received               

Issue 176 - Slave replicator does not reliably reconnect when master IP goes down or moves to another host       

Issue 177 - On-disk queues fail due to apparent race condition but do not stop the replicator            

Issue 180 - Parallel queues are not crash safe

Issue 184 - Race condition at start-up of THLParallelQueue causes intermittent pipeline failure

Issue 190 - Tungsten slave fails when restarting on clean logs after reloading a dump

Issue 196 - PostgreSQL streaming replication management fails on start-up        

Issue 198 - Tungsten Replicator retention option does not purge logs

Issue 199 - Tungsten-installer --help-all command hangs on Ubuntu

Issue 202 - configure-service concatenates properties

Issue 203 - Slave replicator incorrectly commits following lock wait timeout

Issue 205 - Heterogeneous installer: do not transfer strings as bytes

Issue 206 - tungsten-installer does not check for binlog being enabled.          

Issue 207 - tungsten installer does not parse --native-slave-takeover correctly  

Issue 208 - tungsten-installer does not detect the server-id correctly

Issue 209 - Inserting data into a myisam table with auto_increment primary key breaks multi master replication

== Tungsten Replicator 2.0.3 ==

This release contains a beta version of the new command line installer, a prototype applier for MySQL to MongoDB replication, and numerous bug fixes.   

Logs and other data structures should be backwards-compatible with version 2.0.2.  If you run into log compatibility problems, please log them as bugs.  If in doubt, quiesce the master(s), allow all slaves to catch up, and clear THL files before upgrading.  

Issue 18 - Tungsten replicator with binary support enabled fails on MySQL 5.5   

Issue 22 - Missing option in configure script to set RMI port

Issue 23 - Missing options to set the applier in configure-service

Issue 24 - Replicator start in sandbox fails due to non-standard ports

Issue 25 - Provide JSON scripting API for replicator             

Issue 29 - Replication failure after long delay between queries...

Issue 30 - WARNING from running trepctl services         

Issue 32 - Tungsten slaves react poorly when they cannot obtain needed sequence number from master 

Issue 34 - Use buffered I/O more effectively when extracting from MySQL binlog

Issue 35 - Clean up Tungten release directory structure

Issue 37 - Tungsten Replicator fails to extract from MySQL 5.5 binlog if clients use utf8mb4 character set

Issue 38 - THL connection URL is not set correctly when using off-board replication

Issue 41 - tungsten-installer does not check if a given directory name is a regular file

Issue 43 - Installation fails with tungsten-installer

Issue 44 - tungsten-installer does not accept --verbose, no-validation and --validate-only unless they are on top

Issue 45 - tungsten-installer creates directories without asking and without options to modify the defaults

Issue 46 - tungsten-installer missing option : --start

Issue 47 - Option names for the same thing should be common to all modes and have a unique name

Issue 48 - tungsten-installer does not check that master and slave have different sources

Issue 49 - Missing option in tungsten-installer in --direct-mode for master-log-directory and master-log-pattern

Issue 50 - tungsten-installer does not require slave-password as mandatory

Issue 54 - Provide a filter that extracts table columns names on the extractor side

Issue 55 - Create Basic MongoDB Applier

Issue 56 - tungsten-installer help should be shortened

Issue 57 - tungsten-installer should not display the full help after an error

Issue 59 - Setting two slaves in direct role with the same master fails

Issue 64 - Add a check to ensure that a master replicator does not have unapplied data in its history log (THL)

Issue 65 - Unable to create RMI listener due to bad IP in /etc/hosts

Issue 68 - After using tungsten-installer with the --direct option, thl does not work 

Issue 69 - ./tools/configure fails when star with a custom made cfg file

Issue 70 - Merge improvements from Tungsten 1.3.x

Issue 72 - RMI port option is not applied

Issue 75 - tungsten-installer fails to notice that the replicator is already started

Issue 76 - Installer with --start-and-report fails to start correctly

Issue 84 - Add options for sandbox installation to master-slave   

Issue 91 - Provide version information for replicator in easy-to-find location

== Tungsten Replicator 2.0.2 ==

This release is our first full open source release and contains a couple of critical bug fixes for parallel and multi-master replication as well as a number of smaller fixes to correct problems with installations.  Logs and other data structures are backwards-compatible with version 2.0.1. 

Issue 1 - Clean up javadoc build warnings

Issue 2 - Configure script does not set up disk log

Issue 3 - Integrate Hudson build number to release tarball

Issue 5 - Replicator does not correctly assign #UNKNOWN shard when updates cross schema boundaries within a single transaction

Issue 6 - When using disk logs, thl list can show a NullPointerException error    

Issue 11 - Add a timestamp column into trep_commit_seqno table in order to know when this table was updated

Issue 15 - Some records get lost in multiple master replication    

Issue 19 - Thl unable to read disk log

Issue 20 - Need installation support for direct pipeline where master is on a remote host 


== Tungsten Replicator 2.0.1 ==

This release is a binary build from the enterprise sources prior to full open source release.  It is free for use while we are getting code properly merged to code.google.com.

  * TUC-211 - Slave replicator freezes after going online following master restart
  * TUC-249 - Replicator consistency checks fail with NullPointerException when replicator is offline
  * TUC-266 - Parallel apply performance is unexpectedly slow when using direct pipeline
  * TUC-267 - Tungsten Replicator tasks improperly commit current block on interruption, which causes a restart failure
  * TUC-268 - race condition with DDL immediately after Tungsten starts
  * TUC-269 - Possible loop with multi-master topology due to block commit
  * TUC-270 - Simple SQL sequence causes UNKNOWN shards
  * TUC-271 - Tungsten 2.0 installation does not work properly for off-board replication