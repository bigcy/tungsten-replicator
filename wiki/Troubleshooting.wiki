#summary Tungsten Replicator troubleshooting
#labels Featured,Phase-Support,Phase-Requirements

= Trouble shooting =

Tungsten is a complex piece of software. Although we are striving to make the installation process as easy as possible, there are many places where something can go wrong. This page lists the most frequent cases.


== Requirement problems ==

=== Operating system ===

 * *ssh*. The operating system user must be able to connect to the other nodes in the cluster to perform the installation. Such user must connect without need for a password, which you can do either by setting a SSH key without a passphrase, or by using ssh-agent. Either way, if the installer complains about something related to SSH, you should make sure that the user can run a command remotely. 
 * *sudo*. This is a tricky requirement. You will need sudo access only if you plan to use a backup method that requires root access (such as xtrabackup). If you are using mysqldump, you don't need it, and you can force installation by skipping this validation ({{{--skip-validation-check=SudoCheck}}}). If you want to use this feature, though, you need to enable sudo broadly for this user, making sure that _requiretty_ is not set in /etc/sudoers;
 * the user must be able to read MySQL binary logs. The simplest way to meet this requirement is making sure that the MySQL data directory is group readable, and assigning the 'mysql' group to the installation user.

=== MySQL ===

MySQL is supported from version 4.1 to 5.5. In order to install Tungsten, you need to make sure of the following:
 * Binary logs must be enabled;
 * Either the binary log name is 'mysql-bin' or you need to specify how the name pattern;
 * Every server must have a unique server ID;
 * MySQL replication must not be active (unless you are installing with the {{{--direct}}} method);
 * the MySQL user that Tungsten will use for replication must have all privileges with grants option;

If any of the above conditions is not met, the installer will complain and refuse to install.

=== Java ===

Java must be installed for Tungsten to run. It requires Java 1.6, regardless of the package. Tungsten rungs fine with the official Sun/Oracle Java, both JRE or JDK, and with openJDK.

=== Ruby ===

Ruby 1.8.5 is required. Installing it is straightforward. Depending on the flavor of your OS, either {{{apt-get ruby}}} or {{{yum ruby}}} will get the job done. If you see errors complaining about missing libraries, probably you need to install a package called {{{ruby-libs}}}.
If you decide to install Ruby on your own, by compiling from source, be aware that one of the libraries ({{{openssl.rb}}}) is compiled only if you have installed a package called {{{openssl-devel}}}. If that package is missing, Ruby compiles without errors, but then the Tungsten installer will complain that Ruby can't find a given library.

== Problems with ./configure ==

If you are having problems with the _./configure_, then you are using an outdated version of Tungsten Replicator. As of version 2.0.4, _./configure_ and _./configure-service_ are deprecated. Instead, you should use *./tools/tungsten-installer* and *./tools/configure-service*. The documentation covers their usage in detail.

== Problems with *second* installation ==
If you have installed Tungsten, and then you want to reinstall with the same servers, either because there was an error, or you have realized that you would like to install with different parameters, you must make sure that the previous installation is removed.
Therefore, before installing Tungsten again, do the following in all the servers where Tungsten was installed:

 * stop the replicator service. ({{{$tungsten_base/tungsten/tungsten-replicator/bin/replicator stop}}}).  
 * make sure the replicator is stopped, using the 'ps' command. If for any reason the replicator does not stop regularly (it may happen if there is a bug or the wrong procedure was used before), you must force it to stop using 'kill'.
 * remove all the THL files (usually in $tungsten_home/thl/svc_name) 
 * drop the tungsten_svc_name schema from MySQL
 * Either run 'reset master', or use the appropriate options when installing ({{{--master-log-file}}} and {{{--master-log-port}}}).

Short link to this page: [http://bit.ly/trtshoot http://bit.ly/trtshoot]